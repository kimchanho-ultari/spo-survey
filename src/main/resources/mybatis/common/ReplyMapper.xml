<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ultari.additional.mapper.common.ReplyMapper">
    <resultMap type="Reply" id="reply">
        <id property="replyId" column="REPLY_ID"/>
        <result property="contentId" column="CONTENT_ID"/>
        <result property="userId" column="USER_ID"/>
        <result property="reply" column="REPLY"/>
        <result property="registDate" column="REGIST_DATE"/>
    </resultMap>
    <select id="findByContentIdOrderByRegistDateAsc" resultMap="reply">
        SELECT REPLY_ID
            , CONTENT_ID
            , USER_ID
            , REPLY
            , REGIST_DATE
        FROM MSG_CONTENT_REPLY
        WHERE CONTENT_ID=#{contentId}
        ORDER BY REGIST_DATE ASC
    </select>
    <select id="findByReplyIdAndUserId" resultMap="reply">
        SELECT REPLY_ID
            , CONTENT_ID
            , USER_ID
            , REPLY
            , REGIST_DATE
        FROM MSG_CONTENT_REPLY
        WHERE REPLY_ID = #{replyId} AND USER_ID = #{userId}
    </select>
    <delete id="deleteByReplyId" parameterType="String">
        DELETE FROM MSG_CONTENT_REPLY WHERE REPLY_ID = #{replyId}
    </delete>
    <insert id="save">
        INSERT INTO MSG_CONTENT_REPLY (REPLY_ID, CONTENT_ID, USER_ID, REPLY, REGIST_DATE) VALUES(#{replyId}, #{contentId}, #{userId}, #{reply}, #{registDate})
    </insert>
</mapper>